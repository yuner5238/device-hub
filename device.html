<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>DeviceHub - 设备详情</title>
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css" />
  <style>
    body {
      padding: 20px;
      background: #f9f9f9;
    }
    #app {
      max-width: 700px;
      margin: auto;
    }
    .password-dialog .el-dialog__body {
      padding-bottom: 0;
    }
    .edit-buttons {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div id="app">
    <el-page-header content="设备详情" @back="goBack" style="margin-bottom: 20px;"></el-page-header>

    <el-card v-if="device" shadow="hover">
      <el-form :model="device" label-width="100px" :disabled="!isEditing">
        <el-form-item label="设备名称">
          <el-input v-model="device.name" :disabled="true"></el-input>
        </el-form-item>
        <el-form-item label="位置">
          <el-input v-model="device.location"></el-input>
        </el-form-item>
        <el-form-item label="上次维护">
          <el-date-picker
            v-model="device.last_maintenance"
            type="date"
            placeholder="选择日期"
            format="yyyy-MM-dd"
            value-format="yyyy-MM-dd"
          ></el-date-picker>
        </el-form-item>
        <el-form-item label="备注">
          <el-input
            type="textarea"
            v-model="device.notes"
            :rows="4"
          ></el-input>
        </el-form-item>
      </el-form>

      <div class="edit-buttons" v-if="!isEditing">
        <el-button type="primary" @click="showPasswordDialog">编辑</el-button>
      </div>

      <div class="edit-buttons" v-else>
        <el-button type="success" @click="saveDevice">保存</el-button>
        <el-button @click="cancelEdit">取消</el-button>
      </div>
    </el-card>

    <el-dialog
      title="请输入编辑密码"
      :visible.sync="passwordDialogVisible"
      width="400px"
      :before-close="() => { inputEditPassword = ''; passwordError = '' }"
      class="password-dialog"
    >
      <el-input
        v-model="inputEditPassword"
        placeholder
